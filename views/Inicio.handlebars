<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/jquery/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

<nav class="navbar navbar-expand-lg navbar-light bg-success">
  <div class="container d-flex justify-content-center align-items-center">
    <a class="navbar-brand" href="#" data-bs-toggle="modal" data-bs-target="#selectedProductsModal">
      <img src="shoppingcart.svg" alt="Shopping Cart Icon" style="width: 50px; height: 50px;" />
    </a>
  </div>
</nav>
<div class="container mt-4 mb-4">
  <div class=" d-flex flex-column text-center justifycontent-center align-items-center">
    <h1>Selecciona los productos para agregar al carro</h1>
    <h2>Haz clic en los botones</h2>
  </div>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {{> Tarjetas }}
  </div>
</div>
<div class="modal" id="selectedProductsModal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Productos Seleccionados</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="selectedProductImages">
        {{> selectedImages}}
      </div>
    </div>
  </div>
</div>


<style>
  * {
    margin: 0;
  }

  .contain {
    background: #ece9e9;
    height: 100vh;
  }
</style>
<script>
  // Obtener el modal
  var miModal = new bootstrap.Modal(document.getElementById('selectedProductsModal'));

  // Arreglo para almacenar las imágenes seleccionadas
  var selectedImages = [];

  // Event listener para los botones "Agregar" en las tarjetas
  document.querySelectorAll('.btn-agregar').forEach(button => {
    button.addEventListener('click', function () {
      let imageUrl = this.getAttribute('data-image'); // Obtener la ruta de la imagen del atributo personalizado

      // Agregar la imagen a la lista de imágenes seleccionadas
      selectedImages.push(imageUrl);

      // Actualizar la vista del modal con las imágenes seleccionadas
      document.getElementById('selectedProductImages').innerHTML = '';
      selectedImages.forEach(image => {
        var imageElement = document.createElement('img');
        imageElement.src = image;
        imageElement.alt = image;
        document.getElementById('selectedProductImages').appendChild(imageElement);
      });

      // Mostrar el modal
      miModal.show();
    });
  });

</script>